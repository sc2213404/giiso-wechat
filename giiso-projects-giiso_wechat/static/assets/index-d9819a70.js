import{_ as k,u as z,r as p,a as n,o as F,c as B,b as d,d as e,w as a,e as o,l as N,f,t as x,p as q,g as M,h as R,M as U}from"./index-19d99aad.js";const $=c=>(q("data-v-1774836d"),c=c(),M(),c),D={class:"login-page"},E={class:"p-16px"},H={class:"login-box"},L={class:"login-form-wrapper"},P=$(()=>d("div",{class:"login-form-title"},"验证码登录 / 注册",-1)),T={class:"verification-code-input"},j={__name:"index",setup(c){const b=z(),t=p({phone:"",verificationCode:""}),r=p(!1),s=p(0),C=()=>{u.value.validateField("phone",_=>{_||R({tel:t.value.phone,type:1}).then(l=>{if(l.code==0){U.success("验证码发送成功"),s.value=60;const i=setInterval(()=>{s.value--,s.value<=0&&clearInterval(i)},1e3)}})})},u=p(),V=()=>{u.value.validate(_=>{if(!_){r.value=!0;let l={tel:t.value.phone,code:t.value.verificationCode};N(l).then(i=>{r.value=!1,i.code==0&&b.changeHasLoginCommon(!0,i.data)})}})};return(_,l)=>{const i=n("a-alert"),y=n("icon-phone"),v=n("a-input"),g=n("a-form-item"),w=n("icon-safe"),h=n("a-button"),S=n("a-space"),I=n("a-form");return F(),B("div",D,[d("div",E,[e(i,{closable:""},{default:a(()=>[f("注册 / 登录后可绑定机器人")]),_:1})]),d("div",H,[d("div",L,[P,e(I,{ref_key:"loginFormRef",ref:u,model:o(t),class:"login-form",layout:"vertical",onSubmit:V},{default:a(()=>[e(g,{field:"phone",rules:[{required:!0,message:"手机号不能为空"},{match:/^1[3-9]\d{9}$/,message:"请输入正确的手机号"}],"validate-trigger":["blur"],"hide-label":""},{default:a(()=>[e(v,{size:"large",modelValue:o(t).phone,"onUpdate:modelValue":l[0]||(l[0]=m=>o(t).phone=m),placeholder:"请输入手机号","max-length":11,"allow-clear":""},{prefix:a(()=>[e(y)]),_:1},8,["modelValue"])]),_:1}),e(g,{field:"verificationCode",rules:[{required:!0,message:"验证码不能为空"}],"validate-trigger":["blur"],"hide-label":""},{default:a(()=>[d("div",T,[e(v,{size:"large",modelValue:o(t).verificationCode,"onUpdate:modelValue":l[1]||(l[1]=m=>o(t).verificationCode=m),placeholder:"请输入验证码","max-length":6,"allow-clear":""},{prefix:a(()=>[e(w)]),_:1},8,["modelValue"]),e(h,{disabled:o(s)>0,onClick:C},{default:a(()=>[f(x(o(s)>0?`${o(s)}s后重试`:"获取验证码"),1)]),_:1},8,["disabled"])])]),_:1}),e(S,{size:16,direction:"vertical"},{default:a(()=>[e(h,{class:"m-t-10px",type:"primary","html-type":"submit",size:"large",long:"",loading:o(r)},{default:a(()=>[f(x(o(r)?"登录 / 注册中...":"登录 / 注册"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])])}}},G=k(j,[["__scopeId","data-v-1774836d"]]);export{G as default};
